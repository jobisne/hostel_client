{"ast":null,"code":"import _defineProperty from\"/home/jobilite/Desktop/hostel_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/jobilite/Desktop/hostel_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/jobilite/Desktop/hostel_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{useMutation}from'@apollo/react-hooks';import{REGISTER_USER}from'../Query/graphql';import{Form,Button}from'semantic-ui-react';import{AuthContext}from'../context/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(props){var context=useContext(AuthContext);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useState3=useState({masterName:'',hostelName:'',password:'',confirmPassword:''}),_useState4=_slicedToArray(_useState3,2),values=_useState4[0],setValues=_useState4[1];var onChange=function onChange(event){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},event.target.name,event.target.value)));};var _useMutation=useMutation(REGISTER_USER,{update:function update(proxy,_ref){var userData=_ref.data.register;// console.log(result)\ncontext.login(userData);props.history.push(\"/\");},onError:function onError(err){setErrors(err.graphQLErrors[0].extensions.exception.errors);},variables:values}),_useMutation2=_slicedToArray(_useMutation,2),addUser=_useMutation2[0],loading=_useMutation2[1].loading;var onSubmit=function onSubmit(event){event.preventDefault();addUser();};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,noValidate:true,className:loading?'loading':'',children:[/*#__PURE__*/_jsx(Form.Input,{label:\"Username\",placeholder:\"Username...\",value:values.masterName,type:\"text\",name:\"masterName\",onChange:onChange,error:errors.masterName?true:false}),/*#__PURE__*/_jsx(Form.Input,{label:\"Name\",placeholder:\"Name...\",value:values.hostelName,type:\"text\",name:\"hostelName\",onChange:onChange,error:errors.hostelName?true:false}),/*#__PURE__*/_jsx(Form.Input,{label:\"Password\",placeholder:\"Password...\",value:values.password,type:\"password\",name:\"password\",onChange:onChange,error:errors.password?true:false}),/*#__PURE__*/_jsx(Form.Input,{label:\"Confirm Password\",placeholder:\"Confirm Password...\",value:values.confirmPassword,name:\"confirmPassword\",type:\"password\",onChange:onChange,error:errors.confirmPassword?true:false}),/*#__PURE__*/_jsx(Button,{type:\"submit\",primary:true,children:\"Register\"})]}),Object.keys(errors).length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"ui error message\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:Object.values(errors).map(function(value){return/*#__PURE__*/_jsx(\"li\",{children:value},value);})})})]});}export default Register;","map":{"version":3,"sources":["/home/jobilite/Desktop/hostel_client/src/pages/Register.js"],"names":["React","useState","useContext","useMutation","REGISTER_USER","Form","Button","AuthContext","Register","props","context","errors","setErrors","masterName","hostelName","password","confirmPassword","values","setValues","onChange","event","target","name","value","update","proxy","userData","data","register","login","history","push","onError","err","graphQLErrors","extensions","exception","variables","addUser","loading","onSubmit","preventDefault","Object","keys","length","map"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react'\nimport { useMutation } from '@apollo/react-hooks';\nimport { REGISTER_USER } from '../Query/graphql';\nimport { Form, Button } from 'semantic-ui-react';\nimport { AuthContext } from '../context/auth';\n\n\nfunction Register(props) {\n    const context = useContext(AuthContext);\n    const [errors, setErrors] = useState({})\n    const [values, setValues ] = useState({\n        masterName: '',\n        hostelName: '',\n        password: '',\n        confirmPassword: ''\n    })\n \n    const onChange = (event) => {\n        setValues({...values, [event.target.name]: event.target.value })\n    }\n\n    const [addUser, { loading} ] = useMutation(REGISTER_USER, {\n        update(proxy, {data: {register: userData}}){\n            // console.log(result)\n            context.login(userData)\n            props.history.push(\"/\");\n        },\n        onError(err){\n            setErrors(err.graphQLErrors[0].extensions.exception.errors)\n        },\n        variables: values\n    })\n\n    const onSubmit = (event) => {\n        event.preventDefault();\n        addUser()\n    }\n    return (\n        <div>\n            <Form onSubmit={onSubmit} noValidate className={loading ? 'loading': ''}>\n\n<Form.Input \n    label=\"Username\"\n    placeholder=\"Username...\"\n    value={values.masterName}\n    type='text'\n    name='masterName'\n    onChange={onChange}\n    error={errors.masterName ? true : false }\n/> \n <Form.Input \n    label=\"Name\"\n    placeholder=\"Name...\"\n    value={values.hostelName}\n    type='text'\n    name='hostelName'\n    onChange={onChange}\n    error={errors.hostelName ? true : false }\n\n/> \n<Form.Input \n      label=\"Password\"\n    placeholder=\"Password...\"\n    value={values.password}\n    type='password'\n    name='password'\n    onChange={onChange}\n    error={errors.password ? true : false }\n\n/> \n <Form.Input \n    label=\"Confirm Password\"\n    placeholder=\"Confirm Password...\"\n    value={values.confirmPassword}\n    name='confirmPassword'\n    type='password'\n    onChange={onChange}\n    error={errors.confirmPassword ? true : false }\n\n/> \n<Button type='submit' primary>\n    Register\n</Button>\n</Form>\n{Object.keys(errors).length > 0 && (\n<div className='ui error message'>\n    <ul className='list'>\n        {Object.values(errors).map(value => (\n            <li key={value}>{value}</li>\n        ))}\n    </ul>\n</div>\n)}\n        </div>\n    )\n}\n\nexport default Register\n"]},"metadata":{},"sourceType":"module"}