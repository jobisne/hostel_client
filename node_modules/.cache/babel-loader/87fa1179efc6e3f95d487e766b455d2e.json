{"ast":null,"code":"import _slicedToArray from\"/home/jobilite/Desktop/hostel_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from\"react\";import{useQuery}from\"@apollo/react-hooks\";import{FETCH_STUDENTS_QUERY}from\"../Query/graphql\";import Loader from\"react-loader-spinner\";import{makeStyles}from\"@material-ui/core/styles\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import Paper from\"@material-ui/core/Paper\";import{Link}from\"react-router-dom\";import EditIcon from\"@material-ui/icons/Edit\";import ViewColumnIcon from\"@material-ui/icons/ViewColumn\";import DeleteButton from\"../components/DeleteButton\";import{AuthContext}from\"../context/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{width:\"100%\",marginTop:theme.spacing(3),overflowX:\"auto\"},'& > *':{margin:theme.spacing(1)}};});function ViewStudent(props){var postId=props.match.params.postId;console.log(postId);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),getStudents=_useState2[0],setGetStudents=_useState2[1];var _useContext=useContext(AuthContext),user=_useContext.user;var _useQuery=useQuery(FETCH_STUDENTS_QUERY,{variables:{postId:postId}}),loading=_useQuery.loading,data=_useQuery.data;// console.log(data)\nuseEffect(function(){var isMounted=true;if(isMounted){if(data){setGetStudents(data.getStudents);}}return function(){isMounted=false;};},[data]);// console.log(data)\nvar rows=getStudents;// console.log(rows);\nfunction deleteStudentCallBack(){window.location.reload();}var classes=useStyles();return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(Loader,{type:\"Circles\",color:\"#00BFFF\",height:100,width:100,timeout:5000}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"LIST OF STUDENT IN \",postId.toUpperCase()]}),/*#__PURE__*/_jsx(Paper,{className:classes.root,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"S/N\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Child Name\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Class\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Child Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Edit\"}),/*#__PURE__*/_jsx(TableCell,{children:\"DELETE\"}),/*#__PURE__*/_jsx(TableCell,{children:\"View\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:rows?rows.map(function(row){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:row.sin}),/*#__PURE__*/_jsx(TableCell,{children:row.childname}),/*#__PURE__*/_jsx(TableCell,{children:row.klass}),/*#__PURE__*/_jsx(TableCell,{children:row.childstatus}),/*#__PURE__*/_jsx(TableCell,{children:row.id?/*#__PURE__*/_jsx(Link,{to:\"/editStudent/\".concat(row.id),children:/*#__PURE__*/_jsx(EditIcon,{})}):row.hostelName}),/*#__PURE__*/_jsx(TableCell,{children:user&&/*#__PURE__*/_jsx(DeleteButton,{postId:row.id,callBack:deleteStudentCallBack})}),/*#__PURE__*/_jsx(TableCell,{children:row.id?/*#__PURE__*/_jsx(Link,{to:\"/viewStudent/\".concat(row.id),children:/*#__PURE__*/_jsx(ViewColumnIcon,{})}):row.hostelName})]},row.id);}):/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{children:\"No Record Found\"})})})]})})]});}export default ViewStudent;","map":{"version":3,"sources":["/home/jobilite/Desktop/hostel_client/src/pages/ViewStudents.js"],"names":["React","useEffect","useState","useContext","useQuery","FETCH_STUDENTS_QUERY","Loader","makeStyles","Table","TableBody","TableCell","TableHead","TableRow","Paper","Link","EditIcon","ViewColumnIcon","DeleteButton","AuthContext","useStyles","theme","root","width","marginTop","spacing","overflowX","margin","ViewStudent","props","postId","match","params","console","log","getStudents","setGetStudents","user","variables","loading","data","isMounted","rows","deleteStudentCallBack","window","location","reload","classes","toUpperCase","map","row","sin","childname","klass","childstatus","id","hostelName"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { FETCH_STUDENTS_QUERY } from \"../Query/graphql\";\nimport Loader from \"react-loader-spinner\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { Link } from \"react-router-dom\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport ViewColumnIcon from \"@material-ui/icons/ViewColumn\";\nimport DeleteButton from \"../components/DeleteButton\";\nimport { AuthContext } from \"../context/auth\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    marginTop: theme.spacing(3),\n    overflowX: \"auto\",\n  },\n  '& > *': {\n    margin: theme.spacing(1),\n  },\n}));\n\nfunction ViewStudent(props) {\n  const postId = props.match.params.postId;\n  console.log(postId);\n\n  const [getStudents, setGetStudents] = useState([]);\n\n  const { user } = useContext(AuthContext)\n\n  const { loading, data } = useQuery(FETCH_STUDENTS_QUERY, {\n    variables: {\n      postId,\n    },\n  });\n// console.log(data)\n  useEffect(() => {\n    let isMounted = true;\n    if (isMounted) {\n      if (data) {\n        setGetStudents(data.getStudents);\n      }\n    }\n    return () => {\n      isMounted = false;\n    };\n  }, [data]);\n// console.log(data)\n  const rows = getStudents;\n  // console.log(rows);\n\nfunction deleteStudentCallBack(){\n  window.location.reload();\n}\n\n\n  const classes = useStyles();\n  return (\n    <>\n      {loading && (\n        <Loader\n          type=\"Circles\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          timeout={5000}\n        />\n      )}\n          <h3>LIST OF STUDENT IN {postId.toUpperCase()}</h3>\n      {/*========================== Table =============== */}\n      <Paper className={classes.root}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>S/N</TableCell>\n              <TableCell>Child Name</TableCell>\n              <TableCell>Class</TableCell>\n              <TableCell>Child Status</TableCell>\n              <TableCell>Edit</TableCell>\n              <TableCell>DELETE</TableCell>\n              <TableCell>View</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {rows ? (rows.map((row) => {\n              return (\n                <TableRow key={row.id}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    {row.sin}\n                  </TableCell>\n                  <TableCell>{row.childname}</TableCell>\n                  <TableCell>{row.klass}</TableCell>\n                  <TableCell>{row.childstatus}</TableCell>\n                  <TableCell>\n                    {row.id ? (\n                      <Link to={`/editStudent/${row.id}`}>\n                        <EditIcon />\n                      </Link>\n                    ) : (\n                      row.hostelName\n                    )}\n                  </TableCell>\n                  <TableCell>\n                    {user && (\n                      <DeleteButton postId={row.id}  callBack={deleteStudentCallBack}/>\n                    )}\n                    \n                  </TableCell>\n                  <TableCell>\n                    {row.id ? (\n                      <Link to={`/viewStudent/${row.id}`}>\n                        <ViewColumnIcon />\n                      </Link>\n                    ) : (\n                      row.hostelName\n                    )}\n                  </TableCell>\n                </TableRow>\n              );\n            })):(\n              <TableRow>\n                <TableCell>\n                No Record Found\n                </TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </Paper>\n    </>\n  );\n}\n\nexport default ViewStudent;\n"]},"metadata":{},"sourceType":"module"}