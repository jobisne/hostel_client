{"ast":null,"code":"import _defineProperty from\"/home/jobilite/Desktop/hostel_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/jobilite/Desktop/hostel_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/jobilite/Desktop/hostel_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{useMutation}from\"@apollo/react-hooks\";import{LOGIN_USER}from\"../Query/graphql\";import{Form,Button}from\"semantic-ui-react\";import{AuthContext}from'../context/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var context=useContext(AuthContext);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useState3=useState({hostelName:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),values=_useState4[0],setValues=_useState4[1];var onChange=function onChange(event){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},event.target.name,event.target.value)));};var _useMutation=useMutation(LOGIN_USER,{update:function update(proxy,_ref){var userData=_ref.data.login;// console.log(result);\ncontext.login(userData);props.history.push(\"/\");},onError:function onError(err){setErrors(err.graphQLErrors[0].extensions.exception.errors);},variables:values}),_useMutation2=_slicedToArray(_useMutation,2),loginUser=_useMutation2[0],loading=_useMutation2[1].loading;var onSubmit=function onSubmit(event){event.preventDefault();loginUser();};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,noValidate:true,className:loading?\"loading\":\"\",children:[/*#__PURE__*/_jsx(Form.Input,{label:\"Username\",placeholder:\"Username...\",value:values.hostelName,type:\"text\",name:\"hostelName\",onChange:onChange,error:errors.hostelName?true:false}),/*#__PURE__*/_jsx(Form.Input,{label:\"Password\",placeholder:\"Password...\",value:values.password,type:\"password\",name:\"password\",onChange:onChange,error:errors.password?true:false}),/*#__PURE__*/_jsx(Button,{type:\"submit\",primary:true,children:\"LOGIN\"})]}),Object.keys(errors).length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"ui error message\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:Object.values(errors).map(function(value){return/*#__PURE__*/_jsx(\"li\",{children:value},value);})})})]});}export default Login;","map":{"version":3,"sources":["/home/jobilite/Desktop/hostel_client/src/pages/Login.js"],"names":["React","useState","useContext","useMutation","LOGIN_USER","Form","Button","AuthContext","Login","props","context","errors","setErrors","hostelName","password","values","setValues","onChange","event","target","name","value","update","proxy","userData","data","login","history","push","onError","err","graphQLErrors","extensions","exception","variables","loginUser","loading","onSubmit","preventDefault","Object","keys","length","map"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { LOGIN_USER } from \"../Query/graphql\";\nimport { Form, Button } from \"semantic-ui-react\";\nimport { AuthContext } from '../context/auth';\n\nfunction Login(props) {\n\n  const context  = useContext(AuthContext);\n  const [errors, setErrors] = useState({});\n\n  const [values, setValues] = useState({\n    hostelName: \"\",\n    password: \"\",\n  });\n\n  const onChange = (event) => {\n    setValues({ ...values, [event.target.name]: event.target.value });\n  };\n\n  const [loginUser, { loading }] = useMutation(LOGIN_USER, {\n    update(proxy, {data: {login: userData}}) {\n      // console.log(result);\n      context.login(userData)\n      props.history.push(\"/\");\n    },\n    onError(err) {\n      setErrors(err.graphQLErrors[0].extensions.exception.errors);\n    },\n    variables: values,\n  });\n\n  const onSubmit = (event) => {\n    event.preventDefault();\n    loginUser();\n  };\n\n  return (\n    <div className=\"form-container\">\n      <Form onSubmit={onSubmit} noValidate className={loading ? \"loading\" : \"\"}>\n        <Form.Input\n          label=\"Username\"\n          placeholder=\"Username...\"\n          value={values.hostelName}\n          type=\"text\"\n          name=\"hostelName\"\n          onChange={onChange}\n          error={errors.hostelName ? true : false}\n        />\n        <Form.Input\n          label=\"Password\"\n          placeholder=\"Password...\"\n          value={values.password}\n          type=\"password\"\n          name=\"password\"\n          onChange={onChange}\n          error={errors.password ? true : false}\n        />\n\n        <Button type=\"submit\" primary>\n          LOGIN\n        </Button>\n      </Form>\n      {Object.keys(errors).length > 0 && (\n        <div className=\"ui error message\">\n          <ul className=\"list\">\n            {Object.values(errors).map((value) => (\n              <li key={value}>{value}</li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}